"use strict";(self.webpackChunkreact_complete_guide=self.webpackChunkreact_complete_guide||[]).push([[185],{185:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(165),a=t(861),s=t(683),o=t(885),l=t(791),i=t(829),u="CartItem_cart-item__sUgZa",c="CartItem_summary__dKpyV",d="CartItem_price__XgKcy",m="CartItem_amount__-dBqM",h="CartItem_actions__KAVfW",p=t(184),x=function(e){var n="$".concat(e.price.toFixed(2));return(0,p.jsxs)("li",{className:u,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h2",{children:e.name}),(0,p.jsxs)("div",{className:c,children:[(0,p.jsx)("span",{className:d,children:n}),(0,p.jsxs)("span",{className:m,children:["x ",e.amount]})]})]}),(0,p.jsxs)("div",{className:h,children:[(0,p.jsx)("button",{onClick:e.onRemove,children:"\u2212"}),(0,p.jsx)("button",{onClick:e.onAdd,children:"+"})]})]})},f={"cart-items":"Cart_cart-items__-poYs",total:"Cart_total__xajDq",actions:"Cart_actions__G+4oF","btn--alt":"Cart_btn--alt__4zvnv",btn:"Cart_btn__zxYhf"},C=t(815),j=function(e){var n=(0,l.useState)(""),t=(0,o.Z)(n,2),r=t[0],a=t[1],s=(0,l.useState)(!1),i=(0,o.Z)(s,2),u=i[0],c=i[1],d=e(r),m=!d&&u;return{enteredValue:r,isTouched:u,inputBlurHandler:function(){c(!0)},inputChangeHandler:function(e){c(!!m),a(e.target.value)},valueIsValid:d,hasError:m,reset:function(){c(!1),a("")}}},_="Button_button__U0Fpg",b=function(e){return(0,p.jsx)("button",{type:e.type||"button",className:"".concat(_," "),onClick:e.onClick,disabled:e.disabled||"",children:e.children})},v=l.memo(b),g=t(55),y=function(e){var n=(0,l.useContext)(C.Z),t=n.items,s=n.totalAmount,o=j((function(e){return 0!==e.trim().length})),i=o.enteredValue,u=o.inputBlurHandler,c=o.valueIsValid,d=o.inputChangeHandler,m=o.hasError,h=o.reset,x=j((function(e){return 0!==e.trim().length})),f=x.enteredValue,_=x.inputBlurHandler,b=x.valueIsValid,y=x.inputChangeHandler,I=x.hasError,S=x.reset,Z=j((function(e){return 10===e.trim().length})),N=Z.enteredValue,w=Z.inputBlurHandler,k=Z.valueIsValid,V=Z.inputChangeHandler,B=Z.hasError,E=Z.reset,A=j((function(e){return e.includes("@")})),H=A.enteredValue,F=A.inputBlurHandler,O=A.valueIsValid,T=A.inputChangeHandler,D=A.hasError,K=A.reset,q=function(e,n){return e&&(0,p.jsx)("p",{className:"error-text",children:n})},z=c&&O&&b&&k,M=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a){var o;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),o={name:i,address:f,contact:+N,email:H,order:{items:t,totalAmount:s}},e.onSubmit(o),z){n.next=5;break}return n.abrupt("return");case 5:h(),K(),S(),E();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,p.jsxs)("form",{onSubmit:M,style:{height:"200px",overflow:"auto"},children:[(0,p.jsx)(g.Z,{value:i,label:"Name:",input:{id:"name",type:"text",placeholder:"Enter your name here",onBlur:u,onChange:d}}),q(m,"I am pleading you to enter your name"),(0,p.jsx)(g.Z,{value:H,label:"Email:",input:{id:"email",type:"email",placeholder:"Enter your email here",onChange:T,onBlur:F}}),q(D,"Stone age,huh?"),(0,p.jsx)(g.Z,{value:f,label:"Address:",input:{id:"address",type:"text",placeholder:"Enter your address here",onChange:y,onBlur:_}}),q(I,"Are you homeless?"),(0,p.jsx)(g.Z,{label:"Contact No.:",value:N,input:{id:"contact",type:"tel",placeholder:"Enter your number here",maxLength:"10",onChange:V,onBlur:w}}),q(B,"Nomad?"),(0,p.jsx)(v,{onClick:e.onCancel,children:"Cancel"}),(0,p.jsx)(v,{type:"submit",disabled:!z,children:"Confirm"})]})},I=t(689),S=function(e){var n=(0,l.useContext)(C.Z),t=(0,l.useState)(!1),u=(0,o.Z)(t,2),c=u[0],d=u[1],m=(0,l.useState)(!1),h=(0,o.Z)(m,2),j=h[0],_=h[1],b="$".concat(Math.abs(n.totalAmount).toFixed(2)),v=n.items.length>0,g=(0,I.s0)();(0,l.useEffect)((function(){!e.cartIsShown&&g("/meals")}),[e.cartIsShown]);var S=function(e){n.removeItem(e)},Z=function(e){n.addItem((0,s.Z)((0,s.Z)({},e),{},{amount:1}))},N=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(a){var s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.clearAllItem(),d(!0),e.onCancel(),t.next=5,fetch("https://react-second-f430c-default-rtdb.firebaseio.com/orders.json",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 5:return s=t.sent,t.next=8,s.json();case 8:t.sent,_(!0),d(!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=(0,p.jsx)("ul",{className:f["cart-items"],children:n.items.map((function(e){return(0,p.jsx)(x,{name:e.name,amount:e.amount,price:e.price,onRemove:S.bind(null,e.id),onAdd:Z.bind(null,e)},e.id)}))}),k=(0,p.jsx)("button",{className:f["button--alt"],onClick:e.onClose,children:"Close"}),V=v&&e.cartIsShown&&!e.formIsShown&&!j,B=e.cartIsShown&&!e.formIsShown&&!c;return(0,p.jsx)(l.Fragment,{children:e.cartIsShown&&(0,p.jsxs)(i.Z,{onClose:e.onClose,children:[c&&(0,p.jsx)("p",{children:"Sending Data....."}),j&&(0,p.jsx)("p",{children:"Order Sent"}),!c&&!j&&(0,p.jsxs)(l.Fragment,{children:[w,(0,p.jsxs)("div",{className:f.total,children:[(0,p.jsx)("span",{children:"Total Amount"}),(0,p.jsx)("span",{children:b})]})]}),(0,p.jsxs)("div",{className:f.actions,children:[B&&!j&&k,j&&k,V&&(0,p.jsx)("button",{className:f.button,onClick:e.onOrder,children:"Order"})]}),(0,p.jsx)("div",{children:e.formIsShown&&(0,p.jsx)(y,{onCancel:e.onClose,onSubmit:N})})]})})}}}]);
//# sourceMappingURL=185.5db7cac3.chunk.js.map